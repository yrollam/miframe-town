<html>

<head>
    <title>Dev (electron test designer subscription) test site</title>
</head>
<style>
custom-ele,
custom-ele-with-slot {
    display: inline-block;
    padding: 40px;
    border: 1px solid;
    margin-top: 30px;
}
</style>

<body>
    <div class="title">HOWDY PARDNER, WELCOME TO...pendo-dev...town...</div>
    <custom-ele>
        I'm a shadow dom element with a default slot and no wrapping html tag!
    </custom-ele>
    <custom-ele-with-slot>
        <span slot="text">
            I'm a shadow dom element with a named slot
        </span>
    </custom-ele-with-slot>
    <script>
        const customEle = document.querySelector('custom-ele');
        customEle.attachShadow({ mode: 'open' });

        const slot = document.createElement('slot');
        customEle.shadowRoot.appendChild(slot);
        // console.log("huh?", customEle)

        const customEleWithSlot = document.querySelector('custom-ele-with-slot');
        customEleWithSlot.attachShadow({ mode: 'open' });

        const slot2 = document.createElement('slot');
        slot2.setAttribute('name', 'text');
        customEleWithSlot.shadowRoot.appendChild(slot2);
    </script>
    <script id="pendo-snippet">
        const shouldAddAgent = !window.location.search.includes('no-agent');
        if (shouldAddAgent) {
            initializeSnippetOnTargetWindow(window);
        }

        function initializeSnippetOnTargetWindow(window) {
            const document = window.document;

            // The idea here is that this is the literal copy-pasted snippet
            // Thats why I override window/document above, so we can shift the target window/document of the
            // snippet to the contentWindow/contentDocument of the iframe
            (function (apiKey) {
                (function (p, e, n, d, o) {

                    var v, w, x, y, z; o = p[d] = p[d] || {}; o._q = [];
                    v = ['initialize', 'identify', 'updateOptions', 'pageLoad']; for (w = 0, x = v.length; w < x; ++w)(function (m) {
                        o[m] = o[m] || function () {o._q[m === v[0] ? 'unshift' : 'push']([m].concat([].slice.call(arguments, 0)));};
                    })(v[w]);
                    y = e.createElement(n); y.async = !0; y.src = 'https://pendo-dev-static.storage.googleapis.com/agent/static/' + apiKey + '/pendo.js';
                    z = e.getElementsByTagName(n)[0]; z.parentNode.insertBefore(y, z);
                })(window, document, 'script', 'pendo');

                var url = window.location.search;
                var queryString = {};
                // from https://stevenbenner.com/2010/03/javascript-regex-trick-parse-a-query-string-into-an-object/
                url.replace(
                    new RegExp("([^?=&]+)(=([^&]*))?", "g"),
                    function ($0, $1, $2, $3) {
                        queryString[$1] = $3;
                    }
                );
                window.pendo.initialize({
                    visitor: {
                        id: queryString.visitor || 'testuser@pendo'
                    },
                    disableGuideCenterContentSearch: true,
                    apiKey: '0b8f789d-91df-4cc9-5016-3f7b2e0e8f51',
                    account: {
                        id: 12345,
                        city: 'Raleigh',
                        zipCode: '27601'
                    }
                });

            })('0b8f789d-91df-4cc9-5016-3f7b2e0e8f51');

        }

    </script>
</body>

</html>